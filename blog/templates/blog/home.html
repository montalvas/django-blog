{% extends 'base.html' %}
{% load static %}

{% block title %}
Home
{% endblock title %}

{% block content %}


{% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show mt-3" role="alert">
        <strong>{{ message }}</strong>
        <button type="button" class="btn-close" data-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
{% endif %}

<h1 class="my-4">Postagens</h1>

<table class="table table-hover caption-top">
    <caption>
        {% if request.user.is_authenticated %}
        <a class="btn btn-primary" href="{% url 'blog:post-new' %}">Nova postagem</a>
        {% else %}
        <em><a href="{% url 'accounts:signup' %}">Registre-se</a> para cadastrar uma nova postagem!</em>
        {% endif %}
    </caption>
    <thead class="table-dark">
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Título</th>
            <th scope="col">Autor</th>
            <th scope="col">Última atualização</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <th scope="row">{{ post.pk }}</th>
            <td><a href="{{ post.get_absolute_url }}">{{ post.title }}<a></td>
            <td>{{ post.author }}</td>
            <td>{{ post.updated }}</td>
        </tr>
        {% empty %}
        <tr>
            <th scope="row">Nenhuma postagem cadastrada.</th>
        </tr>
        {% endfor %}
    </tbody>
  </table>

{% endblock content %}